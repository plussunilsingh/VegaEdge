import{j as e}from"./ui-DF4qBJwL.js";import{u as y,r as t}from"./vendor-X0Zsz5kA.js";import{N as w}from"./Navbar-C-8JavLK.js";import{a as b}from"./Footer-B3JFfJSI.js";import{B as S}from"./button-CR-0WL9x.js";import{I as o}from"./input-QZcsRmOs.js";import{L as i}from"./label-CM4u0EOi.js";import{h as E,i as C}from"./index-DuElUvNs.js";const B=()=>{const u=y(),{login:h}=E(),{toast:l}=C(),[p,x]=t.useState(""),[r,g]=t.useState(""),[f,j]=t.useState(""),[n,v]=t.useState(""),[d,c]=t.useState(!1),N=async s=>{s.preventDefault(),c(!0);try{const a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:r,password:n})});if(!a.ok){const m=await a.json();throw new Error(m.detail||"Registration failed")}if((await a.json()).id)await h(r,n)&&(l({title:"Registration Successful",description:"Welcome to Vega Greeks!"}),u("/openchart"));else throw new Error("Invalid response from server")}catch(a){l({title:"Registration Failed",description:a.message||"Please check your details and try again.",variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(w,{}),e.jsx("main",{className:"flex-1 py-20 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-md mx-auto bg-card rounded-2xl p-8 shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Create Account"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Full Name"}),e.jsx(o,{id:"name",type:"text",value:p,onChange:s=>x(s.target.value),placeholder:"Enter your name",className:"mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email Address"}),e.jsx(o,{id:"email",type:"email",value:r,onChange:s=>g(s.target.value),placeholder:"Enter your email",className:"mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"Phone Number"}),e.jsx(o,{id:"phone",type:"tel",value:f,onChange:s=>j(s.target.value),placeholder:"Enter your phone",className:"mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(o,{id:"password",type:"password",value:n,onChange:s=>v(s.target.value),placeholder:"Create password",className:"mt-2",required:!0})]}),e.jsx(S,{type:"submit",className:"w-full rounded-full",size:"lg",disabled:d,children:d?"Registering...":"Register Now"})]}),e.jsxs("p",{className:"text-center mt-6 text-muted-foreground",children:["Already have an account? ",e.jsx("a",{href:"/login",className:"text-primary hover:underline",children:"Login here"})]})]})})}),e.jsx(b,{})]})};export{B as default};
