import{j as e}from"./ui-DF4qBJwL.js";import{r as s}from"./vendor-X0Zsz5kA.js";import{N as S}from"./Navbar-C-8JavLK.js";import{A as w}from"./AuthenticatedNavbar-B23ijhr0.js";import{a as I}from"./Footer-B3JFfJSI.js";import{I as T}from"./input-QZcsRmOs.js";import{B as c}from"./button-CR-0WL9x.js";import{h as M,j as i}from"./index-DuElUvNs.js";const z=()=>{const{user:n}=M(),[r,x]=s.useState("1"),[l,p]=s.useState(()=>{const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]}),[g,f]=s.useState(""),[j,u]=s.useState(""),[v,N]=s.useState(""),b=()=>{const t=new Date;t.setDate(t.getDate()-1);const a=t.toISOString().split("T")[0],o=new Date(t);return o.setDate(o.getDate()-10),{minDate:o.toISOString().split("T")[0],maxDate:a}},{minDate:D,maxDate:y}=b(),d=()=>{const t=Math.random();fetch(i.chart.getChartData(r,t,l)).then(a=>a.text()).then(a=>f(a)).catch(a=>console.error("Error fetching chart:",a))},m=()=>{const t=Math.random();fetch(i.chart.getTableData(r,t,l)).then(a=>a.text()).then(a=>u(a)).catch(a=>console.error("Error fetching table:",a))},h=()=>{const t=Math.random();fetch(i.chart.getLatestData(r,t,l)).then(a=>a.text()).then(a=>N(a)).catch(a=>console.error("Error fetching latest:",a))};return s.useEffect(()=>{d(),m(),h();const t=setInterval(()=>{d(),m(),h()},6e4);return()=>clearInterval(t)},[r,l]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[n?e.jsx(w,{}):e.jsx(S,{}),!(n!=null&&n.approved)&&e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4",role:"alert",children:[e.jsx("p",{className:"font-medium",children:"Account Pending Approval"}),e.jsx("p",{children:"You can view 10 days of backtest data. Full access will be granted after admin approval."})]}),e.jsx("main",{className:"flex-1 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 justify-center md:justify-end",children:[e.jsx(c,{size:"sm",className:"bg-primary hover:bg-primary/90",children:"Event-Driven Strategies"}),e.jsx(c,{size:"sm",variant:"secondary",children:"Neutral Market Strategies"}),e.jsx(c,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Bearish Market Strategies"}),e.jsx(c,{size:"sm",className:"bg-red-600 hover:bg-red-700",children:"Bullish Market Strategies"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex-1 min-w-[250px]",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Option Chain"}),e.jsxs("select",{value:r,onChange:t=>x(t.target.value),className:"w-full max-w-xs bg-card border border-border rounded-md px-4 py-2",children:[e.jsx("option",{value:"1",children:"Nifty 50"}),e.jsx("option",{value:"2",children:"BANKNIFTY"}),e.jsx("option",{value:"3",children:"SENSEX"}),e.jsx("option",{value:"4",children:"FINNIFTY"}),e.jsx("option",{value:"5",children:"MIDCPNIFTY"})]})]}),e.jsx("div",{className:"flex-1 min-w-[200px] text-right",children:e.jsx(T,{type:"date",value:l,onChange:t=>p(t.target.value),min:D,max:y,className:"bg-card max-w-xs ml-auto"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:v},className:"mb-6"}),e.jsx("div",{dangerouslySetInnerHTML:{__html:g},className:"min-h-[600px]"})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-card rounded-2xl shadow-lg overflow-hidden sticky top-24",children:e.jsx("div",{className:"max-h-[800px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-black text-white z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Call Vega"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Put Vega"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Difference"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Trend"})]})}),e.jsx("tbody",{dangerouslySetInnerHTML:{__html:j}})]})})})})]})]})}),e.jsx(I,{})]})};export{z as default};
